(()=>{"use strict";const e=window.wp.blocks,l=window.wp.blockEditor,t=window.wp.components,i=window.wp.data,n=window.wp.coreData,a=window.wp.i18n,s=window.ReactJSXRuntime;function r(e){var l,t,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var n=e.length;for(l=0;l<n;l++)e[l]&&(t=r(e[l]))&&(i&&(i+=" "),i+=t)}else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}const o=function(){for(var e,l,t=0,i="",n=arguments.length;t<n;t++)(e=arguments[t])&&(l=r(e))&&(i&&(i+=" "),i+=l);return i},d=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"wa/image-link-tile","title":"Image Link Tile","category":"design","icon":"format-image","attributes":{"mediaId":{"type":"number"},"mediaUrl":{"type":"string"},"linkUrl":{"type":"string","default":""},"titleAlignment":{"type":"string","default":"left"}},"editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./app.css"}'),{name:c}=d,m={edit:function({attributes:e,attributes:{mediaUrl:r,linkUrl:o,mediaId:d,titleAlignment:c},setAttributes:m}){const{pages:g,hasResolved:p}=(0,i.useSelect)(e=>{const l={per_page:-1,status:"publish",_fields:"id,title,link,status"},t=e(n.store);return{pages:t.getEntityRecords("postType","page",l),hasResolved:t.hasFinishedResolution("getEntityRecords",["postType","page",l])}},[]),u=[{label:(0,a.__)("Select a page...","text-domain"),value:""}];g&&g.forEach(e=>{u.push({label:e.title.rendered,value:e.link})});const h=g?.find(e=>e.link===o),w=h?h.title.rendered:(0,a.__)("No Page Selected","wa");return(0,s.jsxs)("div",{...(0,l.useBlockProps)(),children:[(0,s.jsxs)(l.BlockControls,{children:[(0,s.jsx)(l.AlignmentToolbar,{value:c,onChange:e=>m({titleAlignment:e})}),r&&(0,s.jsx)(l.BlockControls,{group:"other",children:(0,s.jsx)(l.MediaReplaceFlow,{mediaId:d,mediaUrl:r,allowedTypes:["image"],accept:"image/*",onSelect:e=>{m({mediaUrl:e.url,mediaId:e.id})},name:(0,a.__)("Replace Image","wa")})})]}),(0,s.jsx)(l.InspectorControls,{children:(0,s.jsxs)(t.PanelBody,{title:(0,a.__)("Tile Settings"),children:[p?(0,s.jsx)(t.SelectControl,{label:(0,a.__)("Select Link Page"),value:o,options:u,onChange:e=>m({linkUrl:e})}):(0,s.jsx)(t.Spinner,{}),(0,s.jsx)(t.SelectControl,{label:"Title Alignment",value:c,options:[{label:"Left",value:"left"},{label:"Right",value:"right"}],onChange:e=>m({titleAlignment:e})})]})}),(0,s.jsx)("div",{className:`wa-image-link-tile alignment-${c}`,children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:r}),(0,s.jsx)("div",{className:"label",children:(0,s.jsx)("h3",{children:w})})]}):(0,s.jsx)(l.MediaPlaceholder,{onSelect:e=>m({mediaUrl:e.url,mediaId:e.id}),allowedTypes:["image"],labels:{title:"Tile Image"}})})]})},save:function({attributes:e}){const{mediaUrl:t,linkUrl:i,titleAlignment:n}=e;let a=l.useBlockProps.save({className:o("wa-image-link-tile",`alignment-${n}`)});return(0,s.jsx)("div",{...a,children:(0,s.jsxs)("a",{href:i,children:[(0,s.jsx)("img",{src:t,className:"tile-bg",alt:""}),(0,s.jsx)("div",{className:"tile-overlay"}),(0,s.jsx)("div",{className:"label",children:(0,s.jsx)("h3",{children:"DYNAMIC_TITLE_HOLDER"})})]})})}};(0,e.registerBlockType)({name:c,...d},m)})();