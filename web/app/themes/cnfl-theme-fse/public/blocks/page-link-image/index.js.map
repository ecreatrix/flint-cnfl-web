{"version":3,"file":"page-link-image/index.js","mappings":"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","sources":["webpack://cnfl-theme/./node_modules/clsx/dist/clsx.mjs","webpack://cnfl-theme/./resources/blocks/page-link-image/edit.jsx","webpack://cnfl-theme/./resources/blocks/page-link-image/save.jsx","webpack://cnfl-theme/external window [\"wp\",\"blockEditor\"]","webpack://cnfl-theme/external window [\"wp\",\"blocks\"]","webpack://cnfl-theme/external window [\"wp\",\"components\"]","webpack://cnfl-theme/external window [\"wp\",\"coreData\"]","webpack://cnfl-theme/external window [\"wp\",\"data\"]","webpack://cnfl-theme/external window [\"wp\",\"i18n\"]","webpack://cnfl-theme/external window \"ReactJSXRuntime\"","webpack://cnfl-theme/webpack/bootstrap","webpack://cnfl-theme/webpack/runtime/compat get default export","webpack://cnfl-theme/webpack/runtime/define property getters","webpack://cnfl-theme/webpack/runtime/hasOwnProperty shorthand","webpack://cnfl-theme/webpack/runtime/make namespace object","webpack://cnfl-theme/./resources/blocks/page-link-image/index.jsx"],"sourcesContent":["function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\nimport { useBlockProps, MediaPlaceholder, InspectorControls, BlockControls, AlignmentToolbar,  MediaReplaceFlow } from '@wordpress/block-editor';\nimport { PanelBody, SelectControl, Spinner } from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport { store as coreStore } from '@wordpress/core-data';\nimport { __ } from '@wordpress/i18n';\n\nexport default function Edit({ attributes, attributes: { mediaUrl, linkUrl, mediaId, titleAlignment }, setAttributes }) {\n  //console.log(attributes)\n\n  const onSelectMedia = (media) => {\n    setAttributes({\n      mediaUrl: media.url,\n      mediaId: media.id,\n    });\n  };\n\n  // Fetch all pages to populate the dropdown\n  const { pages, hasResolved } = useSelect((select) => {\n    const query = { \n      per_page: -1, \n      status: 'publish',\n          _fields: 'id,title,link,status' // Performance: only fetch what we need\n        };\n\n        const selector = select(coreStore);\n\n        return {\n          pages: selector.getEntityRecords('postType', 'page', query),\n          hasResolved: selector.hasFinishedResolution('getEntityRecords', ['postType', 'page', query]),\n        };\n      }, []);\n\n  // Format pages for the SelectControl options\n  const options = [\n    { label: __('Select a page...', 'text-domain'), value: '' }\n  ];\n\n  if (pages) {\n    pages.forEach((page) => {\n      options.push({\n        label: page.title.rendered,\n                value: page.link, // Store the full URL\n              });\n    });\n  }\n\n  // Find the title of the currently selected link for the preview\n  const selectedPage = pages?.find(p => p.link === linkUrl);\n  const displayTitle = selectedPage ? selectedPage.title.rendered : __('No Page Selected', 'wa');\n\n  return (\n    <div { ...useBlockProps() }>\n      <BlockControls>\n        <AlignmentToolbar\n          value={ titleAlignment }\n          onChange={ ( val ) => setAttributes( { titleAlignment: val } ) }\n        />\n        { mediaUrl && (\n          <BlockControls group=\"other\">\n            <MediaReplaceFlow\n              mediaId={ mediaId }\n              mediaUrl={ mediaUrl }\n              allowedTypes={ [ 'image' ] }\n              accept=\"image/*\"\n              onSelect={ onSelectMedia }\n              name={ __( 'Replace Image', 'wa' ) }\n            />\n          </BlockControls>\n        ) }\n      </BlockControls>\n\n      <InspectorControls>\n        <PanelBody title={ __( 'Tile Settings' ) }>\n          { ! hasResolved ? (\n            <Spinner />\n            ) : (\n            <SelectControl\n              label={ __( 'Select Link Page' ) }\n              value={ linkUrl }\n              options={ options }\n              onChange={ (val) => setAttributes({ linkUrl: val }) }\n            />\n            )\n          }\n        <SelectControl\n          label=\"Title Alignment\"\n          value={ titleAlignment }\n          options={ [\n            { label: 'Left', value: 'left' },\n            { label: 'Right', value: 'right' },\n            ] }\n            onChange={ ( val ) => setAttributes( { titleAlignment: val } ) }\n          />\n        </PanelBody>\n      </InspectorControls>\n\n      <div className={`wa-image-link-tile alignment-${titleAlignment}`}>\n        { ! mediaUrl ? (\n          <MediaPlaceholder\n            onSelect={ ( media ) => setAttributes( { mediaUrl: media.url, mediaId: media.id } ) }\n            allowedTypes={ [ 'image' ] }\n            labels={{ title: 'Tile Image' }}\n            />\n            ) : (\n            <>\n              <img src={ mediaUrl } />\n\n              <div className=\"label\">\n                <h3>{ displayTitle }</h3>\n              </div>\n            </>\n        ) }\n      </div>\n    </div>\n  );\n}","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\nimport { useBlockProps } from '@wordpress/block-editor';\n\nexport default function save({ attributes }) {\n  const { mediaUrl, linkUrl, titleAlignment } = attributes;\n  //console.log(attributes)\n  \n  // If no image is selected, don't render anything (or it will be a blank box)\n  //if (!mediaUrl) return null;\n\n  let blockProps = useBlockProps.save( { \n    className: clsx(\n      'wa-image-link-tile',\n      `alignment-${titleAlignment}`\n    )\n  } )\n\n  return (\n      <div { ...blockProps }>\n          <a href={ linkUrl }>\n              <img src={ mediaUrl } className=\"tile-bg\" alt=\"\" />\n              <div className=\"tile-overlay\"></div>\n              <div className=\"label\">\n                  {/* This placeholder is CRITICAL for the PHP filter */}\n                  <h3>DYNAMIC_TITLE_HOLDER</h3>\n              </div>\n          </a>\n      </div>\n  );\n}","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"coreData\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Check if module exists (development only)\n\tif (__webpack_modules__[moduleId] === undefined) {\n\t\tvar e = new Error(\"Cannot find module '\" + moduleId + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * WordPress dependencies\n */\nimport { registerBlockType } from '@wordpress/blocks';\n//import { waDetails as icon } from '../../../icons';\n//import { Path, SVG } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport edit from './edit';\nimport save from './save';\nimport metadata from './block.json';\n\nconst { name } = metadata;\nexport { metadata, name };\n\n//const icon = <SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><Path d=\"M0 128C0 92.7 28.7 64 64 64H448c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128z\"/></SVG>\n\nexport const settings = {\n    //icon,\n    edit,\n    save,\n};\n\n//console.log({ name, ...metadata }, settings)\n\n/**\n * Every block starts by registering a new block type definition.\n *\n * @see https://developer.wordpress.org/block-editor/developers/block-api/#registering-a-block\n */\nregisterBlockType( { name, ...metadata }, settings );"],"names":["clsx","useBlockProps","MediaPlaceholder","InspectorControls","BlockControls","AlignmentToolbar","MediaReplaceFlow","PanelBody","SelectControl","Spinner","useSelect","store","coreStore","__","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Edit","attributes","mediaUrl","linkUrl","mediaId","titleAlignment","setAttributes","onSelectMedia","media","url","id","pages","hasResolved","select","query","per_page","status","_fields","selector","getEntityRecords","hasFinishedResolution","options","label","value","forEach","page","push","title","rendered","link","selectedPage","find","p","displayTitle","children","onChange","val","group","allowedTypes","accept","onSelect","name","className","labels","src","save","blockProps","href","alt","registerBlockType","edit","metadata","settings"],"ignoreList":[],"sourceRoot":""}